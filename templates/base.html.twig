<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        

        {% block stylesheets %}
        <link rel="stylesheet" href={{asset('style.css', 'css')}}>
        {% endblock %}

        {% block javascripts %}
   
        {% endblock %}
    </head>
    
    <body>
        {% include ("nav.html.twig") %}
        <main> 
        {% block body %}{% endblock %}
        </main>
    
        {% include ("footer.html.twig") %}

         <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
         <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
         <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
         <script>
            AOS.init();
            // script.js
document.addEventListener("DOMContentLoaded", function () {
    const favoriteToggleButtons = document.querySelectorAll(".favorite-toggle");

    favoriteToggleButtons.forEach(function (button) {
        button.addEventListener("click", function (event) {
            event.preventDefault();

            const courseId = button.getAttribute("data-course-id");
            const toggleUrl = button.getAttribute("data-toggle-url");

            toggleFavorite(courseId, toggleUrl);
        });
    });

    function toggleFavorite(courseId, toggleUrl) {
        axios
            .post(
                toggleUrl,
                {},
                {
                    headers: {
                        "Content-Type": "application/json",
                        "X-Requested-With": "XMLHttpRequest",
                    },
                    withCredentials: true,
                }
            )
            .then((response) => {
                console.log(response.data);
                // Check for 'Toggle successful' message
                if (response.data.message === "Ajouter au favori avec succès") {
                    alert("Ajouter au favori avec succès");
                    // Update the color of the heart icon
                    const heartIcon = button.querySelector("i");
                    heartIcon.classList.toggle("active");
                } else {
                    alert("Supprimer favori");
                }
            })
            .catch((error) => {
                console.error("Error:", error);
                alert("erreur survenue");
            });

        // Prevent the default action of the anchor link
        event.preventDefault();
    }
});

         </script>
    </body>
</html>
